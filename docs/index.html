<!DOCTYPE html><html class="default" lang="en"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>txwrapper-core</title><meta name="description" content="Documentation for txwrapper-core"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script><link rel="stylesheet" href="assets/hierarchy.css"/></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"><a href="https://github.com/paritytech/txwrapper-core">Repository</a><a href="https://www.parity.io/">Parity.io</a></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">txwrapper-core</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h1>txwrapper-core</h1></div><div class="tsd-panel tsd-typography"><p><br /><br /></p>
<div align="center">
  <h1 align="center">txwrapper-core</h1>
  <h4 align="center"> Tools for FRAME chain builders to publish chain specific offline transaction generation libraries.
 </h4>
  <p align="center">
    <a href="https://www.npmjs.com/package/@substrate/txwrapper-core">
      <img alt="npm" src="https://img.shields.io/npm/v/@substrate/txwrapper-core" />
    </a>
    <a href="https://github.com/paritytech/txwrapper-core/actions">
      <img alt="Github Actions" src="https://github.com/paritytech/txwrapper-core/workflows/pr/badge.svg" />
    </a>
    <a href="https://github.com/paritytech/txwrapper-core/blob/master/LICENSE">
      <img alt="GPL-3.0-or-later" src="https://img.shields.io/npm/l/@substrate/txwrapper-core" />
    </a>
  </p>
</div>
<p><br /><br /></p>
<a id="md:overview" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Overview<a href="#md:overview" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The polkadot.js based txwrapper suite of packages provides chain builders with the tools to quickly create, test, and maintain a library of helper functions for offline transaction generation with their chain. End users can then use these chain specific packages to create an offline transaction workflow. (We sometimes refer to chain specific libs as txwrappers.)</p>
<p>For example, those looking to construct a transaction offline on Polkadot would require @substrate/txwrapper-polkadot. @substrate/txwrapper-polkadot is built by requiring @substrate/txwrapper-core, @substrate/txwrapper-registry, @substrate/txwrapper-substrate and re-exporting utilities and dispatchables relevant to Polkadot.</p>
<a id="md:packages" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Packages<a href="#md:packages" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><a id="md:published" class="tsd-anchor"></a><h4 class="tsd-anchor-link">Published<a href="#md:published" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><ul>
<li><a href="modules/txwrapper_polkadot_src.html">@substrate/txwrapper-polkadot</a> Helper functions for offline transaction generation for polkadot relay and system chains; specifically the following chains: Polkadot, Kusama, Paseo, Westend, Asset Hub Polkadot and Asset Hub Kusama.</li>
<li><a href="modules/txwrapper_core_src.html">@substrate/txwrapper-core</a> The essentials for creating a chain specific txwrapper lib.</li>
<li><a href="modules/txwrapper_registry_src.html">@substrate/txwrapper-registry</a> Registry creation support, catering to chains with types in <a href="https://github.com/polkadot-js/apps/tree/master/packages/apps-config/README.md" target="_blank" class="external">@polkadot/apps-config</a>.</li>
<li><a href="modules/txwrapper_substrate_src.html">@substrate/txwrapper-substrate</a> Selected dispatchables of Substrate pallets, to be re-exported by txwrappers (e.g. @substrate/txwrapper-polkadot).</li>
<li><a href="modules/txwrapper_orml_src.html">@substrate/txwrapper-orml</a> Selected dispatchables of ORML pallets, to be re-exported by txwrappers (e.g. txwrapper-acala).</li>
<li><a href="https://github.com/paritytech/txwrapper-core/tree/main/packages/txwrapper-dev" target="_blank" class="external">@substrate/txwrapper-dev</a> Exported development helpers such as registries and metadata.</li>
</ul>
<a id="md:non-published" class="tsd-anchor"></a><h4 class="tsd-anchor-link">Non-published<a href="#md:non-published" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><ul>
<li><a href="https://github.com/paritytech/txwrapper-core/tree/main/packages/txwrapper-examples" target="_blank" class="external">@substrate/txwrapper-example</a> Usage examples including how to construct, sign, and decode an extrinsic with @substrate/txwrapper-polkadot.</li>
<li><a href="https://github.com/paritytech/txwrapper-core/tree/main/packages/txwrapper-template" target="_blank" class="external">@substrate/txwrapper-template</a> Template package for chain builders.</li>
</ul>
<a id="md:modules" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Modules<a href="#md:modules" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li><a href="modules/txwrapper_core_src.html">txwrapper-core/src</a></li>
<li><a href="modules/txwrapper_polkadot_src.html">txwrapper-polkadot/src</a></li>
<li><a href="modules/txwrapper_substrate_src.html">txwrapper-substrate/src</a></li>
</ul>
<a id="md:end-user-examples" class="tsd-anchor"></a><h2 class="tsd-anchor-link">End user examples<a href="#md:end-user-examples" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p><a href="https://github.com/paritytech/txwrapper-core/tree/main/packages/txwrapper-examples" target="_blank" class="external">Click here for examples on how to use txwrappers for constructing, signing, and decoding transactions.</a></p>
<a id="md:chain-builder-guide" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Chain builder guide<a href="#md:chain-builder-guide" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p><a href="https://github.com/paritytech/txwrapper-core/blob/main/CHAIN_BUILDER.md" target="_blank" class="external">Click here to find our guide for chain builders.</a>. The guide explains how to make a chain specific txwrapper.</p>
<a id="md:develop-contribute-and-maintain" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Develop, contribute, and maintain<a href="#md:develop-contribute-and-maintain" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="md:develop" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Develop<a href="#md:develop" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Install dependencies:</p>
<pre><code class="bash"><span class="hl-0">yarn</span><span class="hl-1"> </span><span class="hl-2">install</span>
</code><button type="button">Copy</button></pre>

<p>Build all packages:</p>
<pre><code class="bash"><span class="hl-0">yarn</span><span class="hl-1"> </span><span class="hl-2">run</span><span class="hl-1"> </span><span class="hl-2">build</span>
</code><button type="button">Copy</button></pre>

<a id="md:contribute" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Contribute<a href="#md:contribute" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>We welcome contributions!</p>
<a id="md:commits" class="tsd-anchor"></a><h4 class="tsd-anchor-link">Commits<a href="#md:commits" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>All the commits in this repo follow the <a href="https://www.conventionalcommits.org/en/v1.0.0/#summary" target="_blank" class="external">Conventional Commits spec</a>. When merging a PR, make sure 1) to use squash merge and 2) that the title of the PR follows the Conventional Commits spec.</p>
<a id="md:before-submitting-your-pr-make-sure-to-run-the-following-commands" class="tsd-anchor"></a><h4 class="tsd-anchor-link">Before submitting your PR, make sure to run the following commands<a href="#md:before-submitting-your-pr-make-sure-to-run-the-following-commands" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>Run all tests:</p>
<pre><code class="bash"><span class="hl-0">yarn</span><span class="hl-1"> </span><span class="hl-2">run</span><span class="hl-1"> </span><span class="hl-2">test</span>
</code><button type="button">Copy</button></pre>

<p>Run the linter:</p>
<pre><code class="bash"><span class="hl-0">yarn</span><span class="hl-1"> </span><span class="hl-2">run</span><span class="hl-1"> </span><span class="hl-2">lint</span><br/><br/><span class="hl-3"># or to automatically fix warnings:</span><br/><br/><span class="hl-0">yarn</span><span class="hl-1"> </span><span class="hl-2">run</span><span class="hl-1"> </span><span class="hl-2">lint</span><span class="hl-1"> </span><span class="hl-4">--fix</span>
</code><button type="button">Copy</button></pre>

<a id="md:maintenance" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Maintenance<a href="#md:maintenance" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><a id="md:yarn" class="tsd-anchor"></a><h4 class="tsd-anchor-link">Yarn<a href="#md:yarn" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>Txwrapper-core runs on yarn berry. It is a package manager local to the repo, and requires updating from time to time. The releases for yarn berry can be found <a href="https://github.com/yarnpkg/berry/releases" target="_blank" class="external">here</a>. Below are the steps to updating yarn.</p>
<pre><code class="bash"><span class="hl-0">$</span><span class="hl-1"> </span><span class="hl-2">yarn</span><span class="hl-1"> </span><span class="hl-2">set</span><span class="hl-1"> </span><span class="hl-2">version</span><span class="hl-1"> &lt;</span><span class="hl-2">versio</span><span class="hl-1">n&gt;</span><br/><span class="hl-0">$</span><span class="hl-1"> </span><span class="hl-2">yarn</span><br/><span class="hl-0">$</span><span class="hl-1"> </span><span class="hl-2">yarn</span><span class="hl-1"> </span><span class="hl-2">dedupe</span>
</code><button type="button">Copy</button></pre>

<a id="md:release--publishing" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Release &amp; Publishing<a href="#md:release--publishing" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><a id="md:preparation" class="tsd-anchor"></a><h4 class="tsd-anchor-link">Preparation<a href="#md:preparation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><ol>
<li>
<p>Ensure that your version of <code>npm</code> is 7 or above. Check with <code>npm --version</code> and, if needed, upgrade with <code>npm install -g npm</code> (which may need to be prefixed with <code>sudo</code> depending on the permissions set on your global <code>node_modules</code> folder). <strong>If this is not true, an empty binary will be pushed on publish.</strong></p>
</li>
<li>
<p>Checkout a branch <code>name-update-deps</code>.</p>
</li>
<li>
<p>In order to update all the polkadot-js dependencies and resolutions, run <code>yarn up '@polkadot/*'</code>.</p>
</li>
<li>
<p>Ensure there are no issues by running the following commands. If any type errors occur due to the updated dependencies, please file an issue <a href="https://github.com/paritytech/txwrapper-core/issues" target="_blank" class="external">here</a>.</p>
<pre><code class="bash"><span class="hl-0">yarn</span><span class="hl-1"> </span><span class="hl-2">run</span><span class="hl-1"> </span><span class="hl-2">build</span><br/><span class="hl-0">yarn</span><span class="hl-1"> </span><span class="hl-2">dedupe</span><br/><span class="hl-0">yarn</span><span class="hl-1"> </span><span class="hl-2">run</span><span class="hl-1"> </span><span class="hl-2">test</span><br/><span class="hl-0">yarn</span><span class="hl-1"> </span><span class="hl-2">run</span><span class="hl-1"> </span><span class="hl-2">lint</span>
</code><button type="button">Copy</button></pre>

</li>
<li>
<p>If all tests pass and all packages build successfully, commit your changes with the following format <code>fix(types): Update polkadot-js deps to get the latest types</code>. Then push your branch up to Github for review, then merge. The release tooling takes care of bumping the version so no need for a manual update (see below).</p>
</li>
</ol>
<a id="md:publishing" class="tsd-anchor"></a><h4 class="tsd-anchor-link">Publishing<a href="#md:publishing" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>This libraries release process uses Lerna, and the following below is required to have a successful release.</p>
<ul>
<li>
<p><strong>N.B.</strong> Ensure you have <a href="https://github.com/lerna/lerna/tree/main/commands/version#--create-release-type" target="_blank" class="external"><code>GH_TOKEN</code> env variable set</a> to a GitHub personal access token (PAT) so lerna can publish the release on github.</p>
</li>
<li>
<p>The publisher will need publishing permissions to the <a href="https://www.npmjs.com/org/substrate" target="_blank" class="external">substrate</a> npm org.</p>
</li>
</ul>
<ol>
<li>
<p>Make sure you're logged in to <code>npm</code> using <code>npm login</code>.</p>
</li>
<li>
<p>Make sure to be in the <code>main</code> branch, and <code>git pull origin main</code>.</p>
</li>
<li>
<p>Before deploying a new release run the following sanity checks.</p>
<pre><code class="bash"><span class="hl-0">yarn</span><span class="hl-1"> </span><span class="hl-2">run</span><span class="hl-1"> </span><span class="hl-2">build</span><br/><span class="hl-0">yarn</span><span class="hl-1"> </span><span class="hl-2">run</span><span class="hl-1"> </span><span class="hl-2">test</span>
</code><button type="button">Copy</button></pre>

</li>
<li>
<p>Deploy the new release. It is important to note there will be a step that asks you to confirm whether or not the version bump is correct. Please confirm with the maintainers the suggested versions are correct.</p>
<pre><code class="bash"><span class="hl-0">yarn</span><span class="hl-1"> </span><span class="hl-2">run</span><span class="hl-1"> </span><span class="hl-2">deploy</span>
</code><button type="button">Copy</button></pre>

<p><strong>NOTES:</strong></p>
<p>This repo requires signed and verified commits, so when using a yubikey there are several points where you are required to sign a commit while Lerna sets up the github release. The output from Lerna won't warn you that you have to sign it, so the <code>deploy</code> step will error if you forget. I'd advise keeping an eye on your Yubikey; it'll start flashing when it's needed to sign something.</p>
<p>If you don't sign a commit in time and get an error, you may need to &quot;undo&quot; some steps:</p>
<ul>
<li>If a new commit was created locally, <code>git reset --hard HEAD~1</code> to undo it.</li>
<li>If a new tag was created locally, <code>git tag -d &lt;new-version&gt;</code> to remove it.</li>
<li>If <code>lerna-debug.log</code> was created, <code>rm -rf lerna-debug.log</code> to remove it.</li>
</ul>
<p>If you forget to login to NPM, the GitHub steps will all complete successfully, but the publishing step will fail. In that case, you can do the following:</p>
<ul>
<li>run <code>yarn run build</code> to ensure that all packages are built and ready to be published (<strong>This is important; <code>yarn run deploy</code> does this for us, but if we skip to publishing, we must ensure that the packages are in a good state ourselves</strong>).</li>
<li>run <code>npx lerna publish from-package</code> to publish the packages.</li>
</ul>
<p>If you don't have the permissions you need on the GitHub repository, you may find that you're able to push a tag but not the actual commit. In this case, you can delete the version tag on GitHub with <code>git push origin :&lt;new-version&gt;</code>.</p>
</li>
</ol>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#md:overview"><span>Overview</span></a><ul><li><a href="#md:packages"><span>Packages</span></a></li><li><ul><li><a href="#md:published"><span>Published</span></a></li><li><a href="#md:non-published"><span>Non-<wbr/>published</span></a></li></ul></li></ul><a href="#md:modules"><span>Modules</span></a><a href="#md:end-user-examples"><span>End user examples</span></a><a href="#md:chain-builder-guide"><span>Chain builder guide</span></a><a href="#md:develop-contribute-and-maintain"><span>Develop, contribute, and maintain</span></a><ul><li><a href="#md:develop"><span>Develop</span></a></li><li><a href="#md:contribute"><span>Contribute</span></a></li><li><ul><li><a href="#md:commits"><span>Commits</span></a></li><li><a href="#md:before-submitting-your-pr-make-sure-to-run-the-following-commands"><span>Before submitting your PR, make sure to run the following commands</span></a></li></ul></li><li><a href="#md:maintenance"><span>Maintenance</span></a></li><li><ul><li><a href="#md:yarn"><span>Yarn</span></a></li></ul></li><li><a href="#md:release--publishing"><span>Release &amp; <wbr/>Publishing</span></a></li><li><ul><li><a href="#md:preparation"><span>Preparation</span></a></li><li><a href="#md:publishing"><span>Publishing</span></a></li></ul></li></ul></div></details></div><div class="site-menu"><nav id="tsd-sidebar-links" class="tsd-navigation"><a href="https://github.com/paritytech/txwrapper-core" class="tsd-nav-link">Repository</a><a href="https://www.parity.io/" class="tsd-nav-link">Parity.io</a></nav><nav class="tsd-navigation"><a href="modules.html" class="current"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="assets/icons.svg#icon-1"></use></svg><span>txwrapper-core</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base="."><li>Loading...</li></ul></nav></div></div></div><footer></footer><div class="overlay"></div><script src="assets/hierarchy.js"></script></body></html>
